<!DOCTYPE html>
<html>
	<head>
		<title>Lisp 2 JS</title>

	</head>
	<style>
	</style>
	<body>

<table>
	<tr>
		<th>Preprocess</th>
		<th>Lisp Code</th>
		<th>JS Code</th>
		<th>Lisp Output</th>
		<th>JS Output</th>
	</tr>
	<tr>
		<td>
			<textarea id="pre" type="text" style="width:250px;height:500px;"></textarea>
		</td>
		<td>
			<textarea id="lisp" type="text" style="width:250px;height:500px;"></textarea>
		</td>
		<td>
			<textarea id="js" type="text" style="width:250px;height:500px;"></textarea>
		</td>
		<td>
			<textarea id="lout" type="text" style="width:250px;height:500px;"></textarea>
		</td>
		<td>
			<textarea id="jsout" type="text" style="width:250px;height:500px;"></textarea>
		</td>
	</tr>
	<tr>
		<td>
			<button id="transnotate" onclick="transnotate()">Transnotate</button>
		</td>
		<td>
			<button id="transpile" onclick="transpile();">Transpile</button>
		</td>
	</tr>
</table>

	</body>

	<script src="lisp2js.js"></script>
	<script src="semisweet.js"></script>
	<script>

		function transnotate() {
			let lisp = document.getElementById("pre").value;
			document.getElementById("lisp").value = semisweet(lisp);
			transpile();
		}
		function transpile() {
			let lisp = document.getElementById("lisp").value;
			let [transpiled, interpreted] = lisp2js(lisp);
			document.getElementById("js").value = transpiled;
			let txt = "";
			function println(line) {
				txt = txt + line + "\n";
				console.log(line);
			}
			let code = document.getElementById("js").value;
			// this part doesn't really work right because of scoping issues...need to figure 
			// that out...
			let result = eval(code);
			txt = txt + String(result);
			document.getElementById("jsout").value = txt;
			document.getElementById("lout").value = interpreted;
		}
	</script>

</html>
